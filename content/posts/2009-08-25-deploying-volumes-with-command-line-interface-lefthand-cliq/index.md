---
title: "Deploying Volumes with Lefthand (CLIQ)"
date: 2009-08-25
categories: 
  - "storage"
tags: 
  - "cliq"
  - "lefthand"
  - "saniq8"
---

Due to my extreme busy schedule I haven’t blogged for a while. Besides studying for VCDX and preparing for VMworld I’m also involved in a couple of projects. One project is designing and implementing a vSphere 4 virtual infrastructure. The VI will host an Exchange 2010 environment. Due to the size of my client’s environment, 192 TB is used for hosting mailboxes. These datastores will be available thru RDM, which means creating 192 1-TB volumes and assigning them to every ESX host in the cluster. I’ve tried to use the Centralized Management Console, but it’s tedious and error prone work. Mind numbing repetitive exercises makes me ask really dumb questions on twitter such as where did SCSI id 7 go? <homer>D’oh!</homer>. So to protect myself from further bashing and being ridiculed I started to search for the Lefthand CLI to be able to automate the creation and assignment of volumes on a Lefthand SAN. <!--more--> **CLIQ**  A CLI is available for the HP EVA series, but not much info is being published about the Lefthand Command Line Interface (CLIQ). But deep down in the bowels of the HP site a document about the CLIQ is published; The “User Manuals API CLI User Manual” [http://h20000.www2.hp.com/bc/docs/support/SupportManual/c01806770/c01806770.pdf?jumpid=reg\_R1002\_USEN](http://h20000.www2.hp.com/bc/docs/support/SupportManual/c01806770/c01806770.pdf?jumpid=reg_R1002_USEN) (But help in the SSH session will offer almost the same amount of info.) **Log in info** Storage nodes configured with SAN/IQ 8.0 are standard equipped with the CLIQ and can be accessed by SSH. Log in to the CLIQ via SSH using the node IP address, but use port 16022 instead of the default port 22. When nodes are a part of a management group any node can be used to access the CLIQ. Open a SSH session to a random node and use the management group user and password information. **Use of CLIQ** The CLIQ is not case sensitive and it the ordering of parameters is not specified. Any order will do. **Let create a volume** _createVolume volumeName=VMFS001 clusterName=ESX-CLUSTER01 size=1TB Replication=2 thinProvision=1 description="VI Datastore VMFS001"_ Size: The following sizes can be used: MB, GB, and TB Replication: The replication level for the volume 1=none,2-way,3-way or 4-way ThinProvision: • 0 – Full-provisioning • 1 – Thin-provisioning **Assigning the volume** _assignvolume volumeName=VMFS001 initiator=iqn.1998-01.com.vmware:esx001.acme.com;iqn.1998-01.com.vmware:esx002.acme.com_ An IQN is used to assign the server to the volume, if a server item is preconfigured in the CMC, the CMC will list the server item at the Assigned Server tab of the volume. Assigning multiple servers to a volume must be done with one command, if two separate commands are being used, the last command will overwrite the first command. Use a ; to delimit IQNs. Those two commands saved me a lot of trouble and lots of unnecessary tedious work, hopefully you can benefit from these as well.
